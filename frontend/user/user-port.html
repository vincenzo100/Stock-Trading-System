<script>
    // Fetch user portfolio from Django API
    document.addEventListener("DOMContentLoaded", function() {
        const token = localStorage.getItem("token");
    
        fetch("https://stock-trading-system-production.up.railway.app/api/getPortfolio/", {
            headers: { "Authorization": `Bearer ${token}` }
        })
        .then(response => response.json())
        .then(data => {
            let tableBody = "";
            data.stocks.forEach(stock => {
                tableBody += `<tr>
                    <td>${stock.company_name}</td>
                    <td>${stock.ticker}</td>
                    <td>${stock.shares}</td>
                    <td>$${stock.price.toFixed(2)}</td>
                    <td>$${(stock.shares * stock.price).toFixed(2)}</td>
                </tr>`;
            });
            document.querySelector(".stocks").innerHTML += tableBody;
        })
        .catch(error => console.error("Error fetching portfolio:", error));
    });
    </script>
    